# 2.4 IP주소 

## 2.4.1 ARP

컴퓨터는 IP주소에서 ARP를 통해 MAC주소를 찾아 MAC주소를 기반으로 통신한다. 

> ARP란 무엇인지 설명하라 

- ARP란 IP주소로부터 MAC주소를 구하는 주소 다리 역할을 하는 프로토콜이다. 
- ARP를 통해 가상 주소인 IP주소를 실제 주소인 MAC주소로 변환한다. 
- 이와 반대로 RARP를 통해 실제 주소인 MAC주소를 가상 주소인 IP주소로 변환하기도 한다. 


결론 : 논리적 주소 -> ARP -> 물리적 주소 
      물리적 주소 -> RARP -> 논리적 주소


> MAC주소를 찾는 과정 

1. 장치 A가 ARP request 브로드캐스트를 보내서(모든 장치에 보내지게 된다) IP주소에 해당하는 MAC주소를 찾는다 
2. 해당 주소에 맞는 장치 B가 ARP reply 유니캐스트를 통해 MAC주소를 반환한다 


> 브로드캐스트와 유니캐스트의 차이 


1. 브로드캐스트

- 정의: 네트워크의 모든 장치에 데이터를 전송하는 방식입니다.
- 특징:
  - 목적지 MAC 주소가 FF:FF:FF:FF:FF:FF입니다.
  - 네트워크의 모든 장치가 패킷을 수신하고 처리합니다.
  - 네트워크 트래픽을 증가시킬 수 있습니다.

- 사용 예: ARP 요청, DHCP 요청 등

2. 유니캐스트:

- 정의: 특정 단일 장치에만 데이터를 전송하는 방식입니다.
- 특징:
  - 목적지 MAC 주소가 특정 장치의 고유한 주소입니다.
  - 지정된 수신자만 패킷을 처리합니다.
  - 네트워크 리소스를 효율적으로 사용합니다.

- 사용 예: 일반적인 데이터 통신, ARP 응답 등

주요 차이점:

수신 대상: 브로드캐스트는 모든 장치, 유니캐스트는 특정 장치
네트워크 부하: 브로드캐스트가 더 많은 부하를 발생시킴
효율성: 유니캐스트가 일반적으로 더 효율적
사용 목적: 브로드캐스트는 주로 정보 요청이나 네트워크 발견에 사용, 유니캐스트는 일반적인 데이터 통신에 사용


## 2.4.2 홉바이홉 통신

> 홉바이홉 통신이 무엇이냐 

- IP주소를 통해 통신하는 과정 
- hop hop (건너뛸때 소리)
- 각 패킷이 여러개의 라우터를 건너가는 모습을 표현한것으로 라우터에 있는 라우팅 테이블의 IP기반으로 패킷을 전달하고 다시 전달해나간다. 
- 결론 : 라우팅 과정을 거쳐 패킷이 최종 목적지까지 도달하는 통신

> 라우팅 테이블은 무엇이냐

- 송신지에서 수신지까지 도달하기 위해 사용된다
- 목적지 정보와 목적지로 가기 위한 다음 라우터의 정보가 담겨있는 테이블 
- `netstat -r`

> 게이트웨이는 무엇이냐 

- 게이트웨이는 서로 다른 통신망, 프로토콜을 사용하는 네트워크간의 통신을 가능하게 하는 관문 역할을 하는 컴퓨터나 소프트웨어를 지칭하는 용어이다. 
  

## 2.4.3 IP 주소체계


> IPv4 vs IPv6

- IPv4 
32비트를 8비트 단위로 점을 찍어 표기한다. 

- IPv6
64비트를 16비트 단위로 점을 찍어 표기한다. 

가장 많이 쓰이는 주소 체계는 IPv4이다.

> 클래스 기반 할당방식. (CIDR) 

옛날엔 다섯개의 클래스로 구분하는 클래스 기반 할당 방식을 사용했다. 앞에 있는 부분을 네트워크 주소, 뒤에 있는 부분을 컴퓨터에 부여하는 주소인 호스트 주소로 놓아서 사용한다.
클래스 A~C는 일대일 통신 / D는 멀티캐스트 통신 / E는 예비용
맨 왼쪽의 비트를 구분비트라고 한다.
네트워크의 첫번째 주소는 네트워크 주소로 사용되고, 가장 마지막 주소는 브로드캐스트용 주소로 네트워크에 속해 있는 모든 컴퓨터에 데이터를 보낼 때 사용된다.
버리는 주소가 많아지는 단점이 있기 때문에 이를 해소하기 위해 DHCP, IPv6, NAT를 사용한다.


> DHCP

IP 주소 및 기타 통신 매개변수를 자동으로 할당하기 위한 네트워크 관리 프로토콜이다.
IP주소를 수동으로 설정할 필요 없이 인터넷에 접속할 때마다 자동으로 IP주소를 할당할 수 있다.


> NAT

패킷이 라우팅 장치를 통해 전송되는 동안 패킷의 IP주소 정보를 수정하여 IP주소를 다른 주소로 매핑하는 방법
IPv4로는 많은 주소를 감당하지 못하는데 NAT로 공인 IP와 사설 IP로 나눠서 처리를 한다.
소프트웨어로는 ICS, RRAS, Netfilter등이 있다.
여러명이 다른 IP를 쓰고 있어도 하나의 공인 IP로 묶어서 인터넷에 접속하기 위함이다.
공유기와 NAT

호스트가 하나의 공인 IP주소를 사용하여 인터넷에 접속하기 위함이다.


> NAT 단점 

여러명이 동시에 접속하기 때문에 실제로 접속하는 호스트 숫자에 따라서 접속 속도가 느려질 수 있다.


> 2.4.4 IP주소를 이용한 위치정보

인터넷의 네트워크 주소이기 때문에 위치 추적이 가능하다.
서브넷 마스크 

https://yonlog.tistory.com/95








